<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TOCFL MOCK BAND A PRACTICE</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>

<div class="container">
    <!-- Modal -->
    <div id="modal">
        <div id="modalContent">
            <p>
                This site was created for TOCFL BAND A preparation. For an official mock test, please visit TOCFL's 
                <a href="https://cbt.sc-top.org.tw/sctopj/" target="_blank">official site</a>. For feedback, find me at <a href="mailto:fangdongyzu@gmail.com">fangdongyzu@gmail.com</a>.<br>To continue, please click "Understood."
            </p>
            <button id="understoodBtn">Understood</button>
        </div>
    </div>

    <!-- Main Page -->
    <div id="mainPage">
        <header>
            <h1>TOCFL MOCK BAND A PRACTICE</h1>
            <p>Select a mock test to begin your practice</p>
        </header>

        <div class="mock-selection">
            <div class="mock" data-mock="5" data-reading="https://fangdongyzu.github.io/tocfl-mock5-reading/" data-listening="https://fangdongyzu.github.io/tocfl-mock5-listening/">
                <strong>MOCK 5</strong>
            </div>

            <div class="mock" data-mock="4" data-reading="https://fangdongyzu.github.io/tocfl-mock4-reading/" data-listening="https://fangdongyzu.github.io/tocfl-mock4-listening/">
                <strong>MOCK 4</strong>
            </div>

            <div class="mock" data-mock="3" data-reading="https://fangdongyzu.github.io/tocfl-mock3-reading/" data-listening="https://fangdongyzu.github.io/tocfl-mock3-listening/">
                <strong>MOCK 3</strong>
            </div>

            <div class="mock" data-mock="2" data-reading="" data-listening="https://fangdongyzu.github.io/tocfl-mock2-listening/">
                <strong>MOCK 2</strong>
            </div>

            <div class="mock" data-mock="1" data-reading="" data-listening="https://fangdongyzu.github.io/tocfl-mock1-listening/">
                <strong>MOCK 1</strong>
            </div>
        </div>
    </div>

    <!-- Choice Popup -->
    <div id="choicePopup">
        <p id="popupTitle"></p>
        <div class="buttons">
            <a id="readingBtn" target="_self"><button>Reading</button></a>
            <a id="listeningBtn" target="_self"><button>Listening</button></a>
        </div>
        <button id="closePopup">Exit</button>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const modal = document.getElementById('modal');
    const understoodBtn = document.getElementById('understoodBtn');
    const mainPage = document.getElementById('mainPage');
    const choicePopup = document.getElementById('choicePopup');
    const popupTitle = document.getElementById('popupTitle');
    const readingBtn = document.getElementById('readingBtn');
    const listeningBtn = document.getElementById('listeningBtn');
    const closePopup = document.getElementById('closePopup');

    // Show modal only once per session
    if (sessionStorage.getItem('tocflModalShown') === 'true') {
        modal.style.display = 'none';
        mainPage.style.display = 'block';
    } else {
        modal.style.display = 'flex';
        mainPage.style.display = 'none';
    }

    // Modal button
    understoodBtn.addEventListener('click', () => {
        modal.style.display = 'none';
        mainPage.style.display = 'block';
        sessionStorage.setItem('tocflModalShown', 'true');
    });

    // MOCK click to open popup
    document.querySelectorAll('.mock').forEach(mock => {
        mock.addEventListener('click', () => {
            const mockNumber = mock.dataset.mock;
            const readingLink = mock.dataset.reading;
            const listeningLink = mock.dataset.listening;

            popupTitle.textContent = `MOCK ${mockNumber}`;

            if (readingLink) {
                readingBtn.href = readingLink;
                readingBtn.style.display = 'inline-block';
            } else {
                readingBtn.style.display = 'none';
            }

            if (listeningLink) {
                listeningBtn.href = listeningLink;
                listeningBtn.style.display = 'inline-block';
            } else {
                listeningBtn.style.display = 'none';
            }

            choicePopup.style.display = 'flex';
        });
    });

    // Close popup
    closePopup.addEventListener('click', () => {
        choicePopup.style.display = 'none';
    });
});
</script>

</body>
</html>